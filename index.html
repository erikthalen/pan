<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Zooming via HTML5 Canvas Context</title>
  <style type="text/css" media="screen">
    body {
      text-align: center;
      margin: 0;
    }

    canvas {
      display: block;
    }
  </style>
</head>

<body>
  <canvas></canvas>

  <script type="text/javascript" charset="utf-8">
    var canvas = document.querySelector('canvas')

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    var gkhead = new Image;

    window.onload = function () {
      var ctx = canvas.getContext('2d');

      function print() {
        ctx.save();
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.restore();

        ctx.scale(0.1, 0.1)
        ctx.drawImage(gkhead, 11000, 3000);

      }
      print();

      var scale = 1;
      const pos = { x: 0, y: 0 }

      const pan = (amount) => {
        pos.x += amount.x;
        pos.y += amount.y;
        
        ctx.setTransform(scale, 0, 0, scale, pos.x, pos.y)
      }
      
      const scaleAt = (at, amount) => {
        scale *= amount;
        pos.x = at.x - (at.x - pos.x) * amount;
        pos.y = at.y - (at.y - pos.y) * amount;
        
        ctx.setTransform(scale, 0, 0, scale, pos.x, pos.y)
      }

      var handleScroll = function (e) {
        e.preventDefault()

        if (!e.ctrlKey) {
          pan({ x: -e.deltaX, y: -e.deltaY })
        } else {
          scaleAt({ x: e.offsetX, y: e.offsetY }, 1 - e.deltaY / 100)
        }

        print()
      }
      canvas.addEventListener('wheel', handleScroll, false);
    };

    gkhead.src = './eye-2.jpg';
  </script>
</body>

</html>